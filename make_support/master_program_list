################################ Master Program List ####################
#
# This is the Master List of All ASF Programs, Libraries, and Tools.
#
#########################################################################
#
#   The program makemake, in asf_tools/make_support, reads this file
# to automatically generate the following files (these files should 
# NOT be edited!)
#    asf_tools/Makefile
#    release/autotar/source.*
#    release/autotar/binary.*
#
#   To add a new program or tool, just put an entry for it
# in the PROGRAMS or TOOLS sections of this file.  Then
# run makemake.  It will parse this file and generate
# new copies of the files above, replacing the old copies.
#
# makemake ignores any line beginning with a #,
# but will completely misunderstand a line with a # in the middle.
#
# makemake uses lines starting with @ to find the path to 
# the program source code (e.g., src_tc vs. src_geo).
#
# Other than # and @, makemake couldn't care less about what form whitespace
# takes, as long as it's there.  Any indentation, returns, etc.
# which you see below are purely for human enjoyment.
#
# Also, note that:
#     progname { BINS x }   is ok, but
#     progname {BINS x}     is not ok (no space between tokens),
#     progname            is not ok (missing braces).
#
# The general syntax is:
#     LIBS { <libraries ...> }
#     PROGRAMS { <programs ...> }
#
#     <programs...>=<program> [ <programs...> ]
#     <program>= <program name> { [ PROGRAMS <program names> ] [ BINS <bin/sys/file names>] }
#
# Here, a "program" is a full-fledged package, with an entry
# in the top-level PROGRAMS list, while "binaries" are just
# files in the bin/$SYS/ directory.
#

# A listing of libraries (easy).
LIBS
{
@src_lib/
	asf
	regex_wrapper
	asf_meta
	asf_concat
	asf_lt
	asf_geolib
	asf_odl
	asf_fft
	libjpeg
	libtiff
	libgeotiff
@src_ifm/
	libifm
@src_tc/
	sarmodel
	tcobj
}

# A listing of programs (not so easy).
PROGRAMS
{
@src/
	calibrate { }
	stats { }
	convert2byte { PROGRAMS stats }
	convert2geotiff { }
# 		jpeg2asf can be compiled if explicitly told to by the
#		convert2jpeg Makefile
	convert2jpeg { }
	convert2ppm { }
	deskew { }
	dspddr { }
	fftMatch { }
	makeddr { }
	meta2ddr { BINS ddr2meta }
	metadata { }
# 		propagate built at the end because not everyone has an F77
#		compiler
	raster_calc { }
	raster_diff { }
	remap { }
	resample { }
	sarin { }
	sarout { }
	sr2gr { }
	trim { }
	
@src_geo/
	accum_offset { }
	concat { }
	concat_dem { }
	concatm { }
	fit_quadratic { }
	idimage { BINS idtable }
	projprm { }
#		Because makemake parses this file from top-to-bottom,
#		you can't reference not-yet-listed programs.
#		Hence the scripts are at the end.
	geocode
	{
		PROGRAMS
			remap
			fit_quadratic
	}
	auto_sar_mosaic 
	{
		PROGRAMS
			calibrate
			sarin
			geocode
			concat
			resample
			idimage
	}
	auto_swath_mosaic 
	{
		PROGRAMS
			calibrate
			sarin
			accum_offset
			concatm
			resample
	}

@src_ifm/
	aisp
	{ 
		BINS
			calc_deltas
			spectra
	}
	avg_in_dop { }
	c2p { }
#		ceos2raw program built later (after propagate which it depends on)
	coh { }
	coregister_coarse { PROGRAMS fftMatch convert2byte c2p }
	coregister_fine { }
	create_dem_grid	{ }
	dem2phase { }
	dem2seeds { }
	deskew_dem { }
	reskew_dem { }
	deramp { }
	elev { }
	eleverr { }
	escher { }
	fit_line { }
	fit_plane { }
	fit_warp { }
	igram  { }
	multilook { }
	p2c { }
	phase_filter { }
	refine_base { }
	refine_offset { }
	trim_slc { }
	zeroify { }
	
@src_tc/
	2dmap { }
	demimg { }
	demclip { }
	despike { }
	greycorr { }
	sargeom { }
	sarsim { }
	rtc_add { }
	tpl_mult { }
	tpl_search { }
	correlate 
	{
		PROGRAMS
			resample
			tpl_mult
			tpl_search
			greycorr
			2dmap
	}
	terrcorr
	{
		PROGRAMS
			sarin
			calibrate
			correlate
			demimg
			demclip
			despike
			sargeom
			rtc_add
			sarsim 
	}

# Propagate is down here so it gets built late as it tends to kill the build
# (because not every machine has f77).
@src/
	propagate { BINS gen_oe asap }


# X-Windows source code	
@src_x/
	sarview { BINS sarview_bin support }
#	sprocket { BINS complex iq standard vexcel_complex geo target_selector
#	                list_ground_targets.sql list_sites.sql convert_standard
#			image2pgm image_mask vexcel_complex_metadata
#			vexcel_complex_data_planes xy_plotter }
#

@experimental/
#	cpx_spectrum { }
#	cpx_autofilter { PROGRAMS cpx_spectrum BINS cpx_filter gen_filt_params }
#	stf2raw { PROGRAMS propagate }

# Down here because it needs propagate
@src_ifm/
	ceos2raw { PROGRAMS propagate }

}


# The categories have no directories or source, but are valid autotar and 
# makefile targets.

CATEGORIES
{
# Open - Anybody can get this stuff (BSD license)
#        src & src_geo
	open {
		calibrate stats convert2byte convert2geotiff convert2jpeg
		convert2ppm deskew dspddr fftMatch makeddr meta2ddr metadata
		raster_calc raster_diff remap resample sarin sarout sr2gr trim
		propagate
		accum_offset concat concat_dem concatm fit_quadratic idimage
		projprm geocode auto_sar_mosaic auto_swath_mosaic 
	}

# Sarview needs to be its own category because of its tcl/tk dependency.
# Just use the prior sarview PROGRAM declaration for autotar or make.

# Restricted - open + ASF controlled + gov't restricted (BSD/ASF license)
#              src, src_geo, src_ifm, & src_tc (stf2raw in experimental)
	restricted {
		open
		aisp avg_in_dop c2p ceos2raw coh coregister_coarse
		coregister_fine create_dem_grid dem2phase dem2seeds deskew_dem
		reskew_dem deramp elev eleverr escher fit_line fit_plane
		fit_warp igram multilook p2c phase_filter refine_base
		refine_offset trim_slc zeroify
		2dmap demimg demclip despike greycorr sargeom sarsim rtc_add
		tpl_mult tpl_search correlate terrcorr
	}
#		stf2raw
#	}
}

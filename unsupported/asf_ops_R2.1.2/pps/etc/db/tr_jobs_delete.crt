/*************************************************************************
 * Copyright(c) 1996, California Institute of Technology.                *
 *             ALL RIGHTS RESERVED.                                      *
 * U.S. Government Sponsorship acknowledged.                             *
 *************************************************************************/
/*=======================
	@(#)tr_jobs_delete.crt	1.1  11/21/96
=========================*/

if exists (select * from sysobjects where name = "tr_jobs_delete")
        drop trigger tr_jobs_delete
go

create trigger tr_jobs_delete
	on jobs
	for delete
as
begin
	declare @num_rows int

	select @num_rows = count(*) from deleted

	if @num_rows = 0
		return

	delete ppsgui_orders
		from ppsgui_orders, deleted
		where ppsgui_orders.job_id = deleted.job_id

end
go

/*************************************************************************
 * Copyright(c) 1996, California Institute of Technology.                *
 *             ALL RIGHTS RESERVED.                                      *
 * U.S. Government Sponsorship acknowledged.                             *
 *************************************************************************/

/*==============================================================================
Filename:	scan_orders.crt
 
Purpose:        Destroy old scan_orders database relation & create a new one.
 
Input:          none.
 
Output:         PPS scan_orders database relation.
 
Modif History:	@(#)scan_orders.crt	1.2  11/27/96
 
Detailed Desc: 
==============================================================================*/

if exists (select 1 from sysobjects where name = "scan_orders")
	drop table scan_orders
go

create table scan_orders (

	order_id	int		  not null,	/* key */
	item_id		int		  not null, 	/* key */
	job_id		int		  not null,

	order_type	OrderType	  not null,
        quicklook_flag  LogicalType	  not null,
	platform	SatType		  not null,
	sensor		SensorType	  not null,
	rev		int		  not null,
	mode		ModeType	  not null,

	sequence	int		  null,
	activity_id	ActivityIdType	  null,
	frame_mode	FrameModeType	  null,
        site_name       char(128)	  null,

	/* object = source media */

	data_direction  DataDirectionType null,
	media_type	MediaTypeType	  null,
	media_id	MediaIdType	  null,
	media_location	varchar(128)	  null,
	start_address	int		  null,
	end_address	int		  null,
	start_time	TimeType	  null,
	end_time	TimeType	  null,
	recorder_id	RecorderIdType	  null,
	station_id	StationIdType	  null,

	/* state vector */

	sv_type		StateVecType	  null,
	sv_coord_sys	CoordSysType	  null,
	sv_rev		int		  null,
	sv_time		TimeType	  null,
	sv_x_pos	real		  null,
	sv_y_pos	real		  null,
	sv_z_pos	real		  null,
	sv_x_velocity	real		  null,
	sv_y_velocity	real		  null,
	sv_z_velocity	real		  null,

	/* GHA */

	gha_time	TimeType	  null,
	gha_angle	real		  null,

	/* TCE */

	tce_rev		int		  null,
	tce_time	TimeType	  null,
	tce_sat_time	int		  null,
	tce_clock_cycle	int		  null,

	primary key nonclustered (order_id, item_id)

)
go

create clustered index scan_idx on scan_orders (job_id,platform,mode)
go


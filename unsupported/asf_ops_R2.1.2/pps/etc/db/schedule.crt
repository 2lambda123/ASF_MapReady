/*************************************************************************
 * Copyright(c) 1996, California Institute of Technology.                *
 *             ALL RIGHTS RESERVED.                                      *
 * U.S. Government Sponsorship acknowledged.                             *
 *************************************************************************/

/*==============================================================================
Filename:	schedule.crt

Purpose:        Drop PPS Schedule database relation and create a new one.
 
Input:          none.
 
Output:         PPS Schedule database relation.
 
Modif History:
		@(#)schedule.crt	1.2  11/27/96
 
Detailed Desc: 	PPS Schedule
==============================================================================*/

if exists (select 1 from sysobjects where name = "schedule")
	drop table schedule 
go

create table  schedule (
	job_sequence	int,
	job_id		int,
	job_type	JobTypeType,
	job_comment	varchar(255)	null,

	priority	PriorityType	null,
	quicklook_flag	LogicalType 	not null,
	insert_top_flag	LogicalType 	null,

	primary key clustered (job_type, quicklook_flag, job_sequence)
)
go

/* The schedule_resequence table is used solely for the purpose of resequencing
 * the schedule table when the job_sequence field reaches the max or min
 * value of the integer data type.  This table is used only by the insert-
 * update trigger of the schedule table */
 
if exists (select 1 from sysobjects where name = "schedule_resequence")
        drop table schedule_resequence
go
 
create table  schedule_resequence (
        job_sequence    int,
        job_id          int,
        job_type        JobTypeType,
        job_comment     varchar(255)    null,
        priority        PriorityType    null,
        quicklook_flag  LogicalType     not null,
        insert_top_flag LogicalType     null,
)
go


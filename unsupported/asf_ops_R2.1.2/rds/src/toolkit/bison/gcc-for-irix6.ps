%!PS-Adobe-3.0
%%BoundingBox: 54 72 558 720
%%Creator: Mozilla (NetScape) HTML->PS
%%DocumentData: Clean7Bit
%%Orientation: Portrait
%%Pages: 3
%%PageOrder: Ascend
%%Title: http://cs16www.in.kobe-u.ac.jp/Lab/Rinkou/Admin/Software/gcc-for-irix6.2
%%EndComments
%%BeginProlog
[ /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash /zero /one
 /two /three /four /five /six /seven /eight /nine /colon /semicolon
 /less /equal /greater /question /at /A /B /C /D /E
 /F /G /H /I /J /K /L /M /N /O
 /P /Q /R /S /T /U /V /W /X /Y
 /Z /bracketleft /backslash /bracketright /asciicircum /underscore /quoteleft /a /b /c
 /d /e /f /g /h /i /j /k /l /m
 /n /o /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
 /space /exclamdown /cent /sterling /currency /yen /brokenbar /section /dieresis /copyright
 /ordfeminine /guillemotleft /logicalnot /hyphen /registered /macron /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered /cedilla /onesuperior /ordmasculine /guillemotright /onequarter /onehalf
 /threequarters /questiondown /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis /Igrave /Iacute /Icircumflex /Idieresis /Eth /Ntilde
 /Ograve /Oacute /Ocircumflex /Otilde /Odieresis /multiply /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls /agrave /aacute /acircumflex /atilde /adieresis /aring
 /ae /ccedilla /egrave /eacute /ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis
 /eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /divide /oslash /ugrave
 /uacute /ucircumflex /udieresis /yacute /thorn /ydieresis] /isolatin1encoding exch def
/c { matrix currentmatrix currentpoint translate
     3 1 roll scale newpath 0 0 1 0 360 arc setmatrix } bind def
/F0
    /Times-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f0 { /F0 findfont exch scalefont setfont } bind def
/F1
    /Times-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f1 { /F1 findfont exch scalefont setfont } bind def
/F2
    /Times-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f2 { /F2 findfont exch scalefont setfont } bind def
/F3
    /Times-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f3 { /F3 findfont exch scalefont setfont } bind def
/F4
    /Courier findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f4 { /F4 findfont exch scalefont setfont } bind def
/F5
    /Courier-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f5 { /F5 findfont exch scalefont setfont } bind def
/F6
    /Courier-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f6 { /F6 findfont exch scalefont setfont } bind def
/F7
    /Courier-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/f7 { /F7 findfont exch scalefont setfont } bind def
/rhc {
    {
        currentfile read {
	    dup 97 ge
		{ 87 sub true exit }
		{ dup 48 ge { 48 sub true exit } { pop } ifelse }
	    ifelse
	} {
	    false
	    exit
	} ifelse
    } loop
} bind def

/cvgray { % xtra_char npix cvgray - (string npix long)
    dup string
    0
    {
	rhc { cvr 4.784 mul } { exit } ifelse
	rhc { cvr 9.392 mul } { exit } ifelse
	rhc { cvr 1.824 mul } { exit } ifelse
	add add cvi 3 copy put pop
	1 add
	dup 3 index ge { exit } if
    } loop
    pop
    3 -1 roll 0 ne { rhc { pop } if } if
    exch pop
} bind def

/smartimage12rgb { % w h b [matrix] smartimage12rgb -
    /colorimage where {
	pop
	{ currentfile rowdata readhexstring pop }
	false 3
	colorimage
    } {
	exch pop 8 exch
	3 index 12 mul 8 mod 0 ne { 1 } { 0 } ifelse
	4 index
	6 2 roll
	{ 2 copy cvgray }
	image
	pop pop
    } ifelse
} def
/cshow { dup stringwidth pop 2 div neg 0 rmoveto show } bind def
/rshow { dup stringwidth pop neg 0 rmoveto show } bind def
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
/pagelevel save def
54 0 translate
%%EndPageSetup
newpath 0 72 moveto 504 0 rlineto 0 648 rlineto -504 0 rlineto  closepath clip newpath
0 711.9 moveto
10 f4
(Path: news.ayamura.tama.or.jp!news.tama.or.jp!nf1.iij.ad.jp!news.iij.ad.jp!triton.ad.jp!news1.pu-toyama.ac.jp!icews5!newssinet!sinetnews!news.join.ad.jp!news.imnet.ad.jp!usenet.seri.re.kr!news.postech.ac.kr!usenet.kornet.nm.kr!agate!howland.erols.net!howland.reston.ans.net!newsfeed.internetmci.com!news.sgi.com!fido.asd.sgi.com!munich.sgi.com!knobi) show
0 701.4 moveto
10 f4
(From: knobi@munich.sgi.com \(Martin Knoblauch\)) show
0 690.9 moveto
10 f4
(Newsgroups: comp.sys.sgi.apps,comp.sys.sgi.admin,comp.sys.sgi.misc) show
0 680.4 moveto
10 f4
(Subject: How to build gcc-2.7.2 under IRIX-6.2 \(a receipe\) [repost]) show
0 669.9 moveto
10 f4
(Date: 9 Aug 1996 14:13:01 GMT) show
0 659.4 moveto
10 f4
(Organization: Silicon Graphics GmbH, Am Hochacker 3, D-85630 Grasbrunn) show
0 648.9 moveto
10 f4
(Lines: 131) show
0 638.4 moveto
10 f4
(Message-ID: <4ufh1d$ohk@fido.asd.sgi.com>) show
0 627.9 moveto
10 f4
(NNTP-Posting-Host: knobi.munich.sgi.com) show
0 617.4 moveto
10 f4
(X-newsreader: xrn 7.03-SGI \(Motif\)) show
0 606.9 moveto
10 f4
(To: knobi@munich.sgi.com) show
0 596.4 moveto
10 f4
(Xref: news.ayamura.tama.or.jp comp.sys.sgi.apps:1528 comp.sys.sgi.admin:6566 comp.sys.sgi.misc:2824) show
0 575.4 moveto
10 f4
(Hi,) show
0 554.4 moveto
10 f4
( some people apparently missed my post of Monday August 5th.) show
0 543.9 moveto
10 f4
(Here it is again with some additional remarks and corrections.) show
0 522.9 moveto
10 f4
(Martin) show
0 512.4 moveto
10 f4
(===============================================================) show
0 501.9 moveto
10 f4
(Hi,) show
0 480.9 moveto
10 f4
( after seeing quite a few requests on how to build gcc-2.7.2) show
0 470.4 moveto
10 f4
(under IRIX-6.2, here is my receipe. I have tested it on my) show
0 459.9 moveto
10 f4
(own systems, but of course there are no guarantees. The) show
0 449.4 moveto
10 f4
(systems tested are an Indy/R4K running 6.2 and an Indigo2/R10K.) show
0 428.4 moveto
10 f4
( First of all, what is the problem? There are two of them:) show
0 407.4 moveto
10 f4
(a\) the 6.2 "ld" program does not handle the output of the) show
0 396.9 moveto
10 f4
(   GNU assembler \(needed to generate debugger ouptut for "-g"\).) show
0 386.4 moveto
10 f4
(   For some reason, wise people have included the original 5.3) show
0 375.9 moveto
10 f4
(   "ld" as "/usr/lib/old_ld" \(parto of IDO\).) show
0 365.4 moveto
10 f4
(b\) the "configure" program wrongly assumes a 64-bit environment) show
0 354.9 moveto
10 f4
(   if it encounters "IRIX 6.2".) show
0 333.9 moveto
10 f4
( Both problems need to be adressed by GNU for the next release) show
0 323.4 moveto
10 f4
(of "binutils" and "gcc". In the meanwhile here is my workaround.) show
0 312.9 moveto
10 f4
(I'm assuming you have IDO purchased and installed \(see my) show
0 302.4 moveto
10 f4
(heritage :-\):) show
0 281.4 moveto
10 f4
(a\) Build the GNU Assembler \(from "binutils"\) using IRIX "cc".) show
0 270.9 moveto
10 f4
(   You need to build it for IRIX-5.3 host AND target. You need) show
0 260.4 moveto
10 f4
(   to install it at a place where "gcc" looks for it BEFORE you) show
0 249.9 moveto
10 f4
(   start building "gcc". Make sure you are working in the) show
0 239.4 moveto
10 f4
(   "-32" compilation environment for SGI's "cc".) show
0 218.4 moveto
10 f4
(% setenv SGI_ABI "-32") show
0 207.9 moveto
10 f4
(% ./configure --host=mips-sgi-irix5.3 --target=mips-sgi-irix5.3 \\) show
0 197.4 moveto
10 f4
(    --build=mips-sgi-irix5.3 ) show
0 186.9 moveto
10 f4
(% gmake CC=cc) show
0 176.4 moveto
10 f4
(% gmake CC=ccc install) show
0 144.9 moveto
10 f4
(b\) Unload the "gcc-2.7.2" distribution. Save the file "collect2.c") show
0 134.4 moveto
10 f4
(   and make the following changes:) show
0 102.9 moveto
10 f4
(% diff -rc2 collect2.c-orig collect2.c) show
0 92.4 moveto
10 f4
(*** collect2.c-orig     Tue Sep 12 19:08:27 1995) show
0 81.9 moveto
10 f4
(--- collect2.c  Mon Aug  5 12:26:39 1996) show
pagelevel restore
showpage
%%Page: 2 2
%%BeginPageSetup
/pagelevel save def
54 0 translate
%%EndPageSetup
newpath 0 72 moveto 504 0 rlineto 0 648 rlineto -504 0 rlineto  closepath clip newpath
0 711.9 moveto
10 f4
(***************) show
0 701.4 moveto
10 f4
(*** 921,925 ****) show
0 690.9 moveto
10 f4
(--- 921,929 ----) show
0 680.4 moveto
10 f4
(       char *argv[];) show
0 669.9 moveto
10 f4
(  {) show
0 659.4 moveto
10 f4
(+ #ifdef USE_OLD_LD) show
0 648.9 moveto
10 f4
(+   char *ld_suffix     = "/usr/lib/old_ld";) show
0 638.4 moveto
10 f4
(+ #else) show
0 627.9 moveto
10 f4
(    char *ld_suffix     = "ld";) show
0 617.4 moveto
10 f4
(+ #endif) show
0 606.9 moveto
10 f4
(    char *full_ld_suffix        = ld_suffix;) show
0 596.4 moveto
10 f4
(    char *real_ld_suffix        = "real-ld";) show
0 585.9 moveto
10 f4
(***************) show
0 575.4 moveto
10 f4
(*** 1407,1412 ****) show
0 564.9 moveto
10 f4
(--- 1411,1421 ----) show
0 554.4 moveto
10 f4
(    /* Load the program, searching all libraries.  */) show
0 543.9 moveto
10 f4
(  ) show
0 533.4 moveto
10 f4
(+ #ifdef USE_OLD_LD) show
0 522.9 moveto
10 f4
(+   collect_execute \("/usr/lib/old_ld", ld1_argv, ldout\);) show
0 512.4 moveto
10 f4
(+   do_wait \("/usr/lib/old_ld"\);) show
0 501.9 moveto
10 f4
(+ #else) show
0 491.4 moveto
10 f4
(    collect_execute \("ld", ld1_argv, ldout\);) show
0 480.9 moveto
10 f4
(    do_wait \("ld"\);) show
0 470.4 moveto
10 f4
(+ #endif) show
0 459.9 moveto
10 f4
(    dump_file \(ldout\);) show
0 449.4 moveto
10 f4
(    unlink \(ldout\);) show
0 438.9 moveto
10 f4
(***************) show
0 428.4 moveto
10 f4
(*** 1510,1514 ****) show
0 417.9 moveto
10 f4
(--- 1519,1527 ----) show
0 407.4 moveto
10 f4
(  ) show
0 396.9 moveto
10 f4
(    fork_execute \("gcc",  c_argv\);) show
0 386.4 moveto
10 f4
(+ #ifdef USE_OLD_LD) show
0 375.9 moveto
10 f4
(+   fork_execute \("/usr/lib/old_ld", ld2_argv\);) show
0 365.4 moveto
10 f4
(+ #else) show
0 354.9 moveto
10 f4
(    fork_execute \("ld", ld2_argv\);) show
0 344.4 moveto
10 f4
(+ #endif) show
0 333.9 moveto
10 f4
(  ) show
0 323.4 moveto
10 f4
(    /* Let scan_prog_file do any final mods \(OSF/rose needs this for) show
0 302.4 moveto
10 f4
(c\) Tell the IRIX "cc" compiler to use the "old" 32 bit mode:) show
0 281.4 moveto
10 f4
(% setenv SGI_ABI "-32") show
0 260.4 moveto
10 f4
(d\) configure "gcc" for an IRIX-5.3 environment:) show
0 239.4 moveto
10 f4
(% ./configure --with-gnu-as --with-stabs --host=mips-sgi-irix5.3 \\) show
0 228.9 moveto
10 f4
(  --target=mips-sgi-irix5.3 --build=mips-sgi-irix5.3) show
0 207.9 moveto
10 f4
(e\) Now bootstrap "gcc" with "USE_OLD_LD" defined:) show
0 186.9 moveto
10 f4
(% gmake LANGUAGES=c CFLAGS="-O2 -DUSE_OLD_LD") show
0 176.4 moveto
10 f4
(% gmake stage1) show
0 165.9 moveto
10 f4
(% gmake CC="stage1/xgcc -Bstage1/" CFLAGS="-g -O2 -DUSE_OLD_LD") show
0 155.4 moveto
10 f4
(% gmake stage2) show
0 144.9 moveto
10 f4
(% gmake CC="stage2/xgcc -Bstage2/" CFLAGS="-g -O2 -DUSE_OLD_LD") show
0 134.4 moveto
10 f4
(% gmake CC="stage2/xgcc -Bstage2/" CFLAGS="-g -O2 -DUSE_OLD_LD" compare) show
0 113.4 moveto
10 f4
( You should not see any message from the last step. Finally:) show
0 92.4 moveto
10 f4
(f\) Install "gcc":) show
pagelevel restore
showpage
%%Page: 3 3
%%BeginPageSetup
/pagelevel save def
54 0 translate
%%EndPageSetup
newpath 0 72 moveto 504 0 rlineto 0 648 rlineto -504 0 rlineto  closepath clip newpath
0 711.9 moveto
10 f4
(% gmake CC="stage2/xgcc -Bstage2/" CFLAGS="-g -O2 -DUSE_OLD_LD" install) show
0 680.4 moveto
10 f4
( A final remark: *I* would not use the resulting product for) show
0 669.9 moveto
10 f4
(64-bit code or for "-mips3"/"-mips4". While "gcc" is a very) show
0 659.4 moveto
10 f4
(fine tool, the level of MIPS support is definitely smaller) show
0 648.9 moveto
10 f4
(compared to other CPU's. I guess "mips1/2" got some fair) show
0 638.4 moveto
10 f4
(testing over the years, but "mips3/4" and the new ABI's) show
0 627.9 moveto
10 f4
(\(-n32, -64\) definitely are to new.) show
0 606.9 moveto
10 f4
(Have more fun) show
0 596.4 moveto
10 f4
(Martin) show
0 585.9 moveto
10 f4
(-- ) show
0 575.4 moveto
10 f4
(+---------------------------------+-----------------------------------+) show
0 564.9 moveto
10 f4
(|Martin Knoblauch                 | Silicon Graphics GmbH             |) show
0 554.4 moveto
10 f4
(|Manager Application Center       | Am Hochacker 3 - Technopark       |) show
0 543.9 moveto
10 f4
(|Silicon Graphics Computer Systems| D-85630 Grasbrunn-Neukeferloh, FRG|) show
0 533.4 moveto
10 f4
(|                                 | Phone: \(+int\) 89 46108-179 or -0  |) show
0 522.9 moveto
10 f4
(|                                 | Fax:   \(+int\) 89 46108-190 \(-222\) |) show
0 512.4 moveto
10 f4
(+---------------------------------+-----------------------------------+) show
0 501.9 moveto
10 f4
(|e-mail: <knobi@munich.sgi.com>   | V-Mail: 5-8935 | M/S: IDE-3150    |) show
0 491.4 moveto
10 f4
(+---------------------------------------------------------------------+) show
pagelevel restore
showpage
%%EOF

<html>
<head>
<title>J1_ftpget</title>
</head>
<body>
<hr>


<p>
This file contains:

<ol>
  <li> Description of the J1_ftpget.csh and J1_ftpgetall.csh (C shell) scripts.
  <li> Summary argument list for the scripts
  <li> Valid argument values for the scripts
  <li> Environment variables to set
  <li> Other programs used, therefore required, by these scripts
  <li> Files created by these scripts
                   
</ol>
<hr>

<ol>
  <li> SCRIPT NAMES: J1_ftpget.csh and J1_ftpget_all.csh

</ol>
<p>
J1_ftpget.csh is the FTP script used to pull files from the NASDA host machine 
to the FAIF host machine.  Note that this script is normally activated only
from J1_ftpget_all.csh.  Execution on the command line is not usually performed.

<p>
In normal operations, J1_ftpget_all.csh is the job that appears in the FAIF
crontab file.  J1_ftpget_all.csh first uses set_env.csh to establish necessary
environment variables (see (4) below), then invokes J1_ftpget.csh repeatedly,
once for each incoming JERS-1 file type being retrieved.

<p>
After JERS-1 files are retrieved, J1_ftpget_all.csh invokes NASDAdirmon 
to process them.

<p>
2. Arguments required

<p>
J1_ftpget_all.csh takes no arguments.
<p>
Arguments required when executing J1_ftpget.csh:

<p>
<pre>
ARGUMENT 1:  RemoteHost               ex. hdds4c10.eoislan.nasda.go.jp
ARGUMENT 2:  upw file                 ex. .../NASDAsend.upw
ARGUMENT 2:  SourceDir                ex. asf/sen
ARGUMENT 3:  Receptdir                ex. /local/faif/NASDA
ARGUMENT 5:  FileToGetType            ex. OPLN
ARGUMENT 6:  Mode                     ex. binary
</pre>

<p>
3. Valid argument 5 values for J1_ftpget.csh

<p>
<pre>
OPLN
ELMF
REQA
REQM
MSGN
MSGC
</pre>

<p>
4. Environment variables

<p>
As explained shortly, setting necessary environment variables is automatic
in normal operations.

<p>
The <a href="FAIF.html#01">FAIF_BINPATH</a> environment variable must be set prior to
running this script or running a FAIF program that invokes this script.  
$FAIF_BINPATH is normally "/asf/bin" in the operational environment.

<p>
The <a href="FAIF.html#01">FAIF_ROOTPATH</a> environment variable must also be set prior to 
running a FAIF program that invokes this script.  This is normally 
"/local/faif" in the operational environment.

<p>
Both of these environment variables are established in set_env.csh.  In normal
operations, J1_ftpget_all.csh, which is in the crontab file to retrieve all
JERS-1 files from NASDA, first uses set_env.csh, then repeatedly invokes
J1_ftpget.csh.

<p>
5. Other files needed to run successfully

<p>
$HOME/set_env.csh<br>
$FAIF_ROOTPATH/FTP/upw/NASDAsend.upw
$FAIF_ROOTPATH/FTP/gtmp/$FileToGetType_previous.log

<p>
Note that, for each valid JERS-1 incoming file type, the file 
$FAIF_ROOTPATH/FTP/gtmp/$FileToGetType_previous.log must exist.  It contains
the full name (as NASDA will re-name it, complete with a sequence number) of 
the most recent file of this type previously successfully retrieved from NASDA.

<p>
6. Files created by this script

<p>
$FAIF_ROOTPATH/FTP/gtmp/$FileToGetType_ftpget.log

<p>
Note again that, in normal operations, J1_ftpget_all.csh is used to invoke
J1_ftpget.csh.  In J1_ftpget_all.csh, set_env.csh is sourced before invoking
J1_ftpget.csh.  Hence, $FAIF_ROOTPATH is defined, and is passed to J1_ftpget.csh
as its ARGUMENT 4.

<hr>
<p>
<font size = -1>
Last Modified:  March, 1998

<p>
Copyright (c) 1996, 1998, California Institute of Technology.<br>
ALL RIGHTS RESERVED.  U.S. Government Sponsorship acknowledged.
</body>
</html>

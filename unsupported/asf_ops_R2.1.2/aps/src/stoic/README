
Thu Sep  5 12:47:48 PDT 1996
I (Larry) am creating this README to note what is in this directory.  
It looks like some of the routines are copies of our library routines, 
and others should be put into an existing APS library.  That will 
simplify this directory and the Makefiles, too.  



STEPS TO FIX THIS CODE AND BRING IT INTO THE APS CM:
1.  Remove the file asf2et.c, link to the lib_timec APS library, and put 
    Pragma statements into the Fortran code, one for each call to the 
    timing routines.  asf2et.c is an altered copy of the lib_timec APS 
    library; it is supposed to be removed.

Some of the typical diffs, with asf2et.c < and lib_timec >:
Here is an interesting one:
< 
< Notes:
<       Most of the routines in this module can be found in the libtimes.a 
<       library; we will switch over to it very soon.
---
>  
> Notes:
>  

There are several of these:
<               return (FALSE) ;
---
>               return (TC_VALID_TIME_ERR) ;

Lots of these types:
<       j = tc_leapyr_(year) ;
---
>       j = tc_leapyr(year) ;

Very large number of these types:
<       return(tc_validate_asf_datetime_(asftime)) ;
---
>       return(tc_validate_asf_datetime(asftime) != TRUE ? FALSE : TRUE) ;

2.  et2ut1.for, and mps2gha.for  should be added to lib_timec.  
    mps2gha.for should be renamed to asf2gha.for

3.  etrans.for should be added to lib_APS; it is a coordinate transform using 
    the vector library.  



LIST OF FILES:
--------------

Makefile          This makefile makes 3 executables and no libraries.  
stoicfile_metadata.exe
gha_today.exe     writes today's GHA for 0 hours.  
gha_update.exe    updates the GHA file.  

aps2ims_archive.c

asf2et.c          This is our file src/lib_timec/timeconvc.c
However, it has been modified in many places:  
1691,1692c1712,1713
<       printf("tc_asf2julian_(asftime2, &julian)\n") ;
<       status = tc_asf2julian_(asftime2, &et) ;
---
>       printf("tc_asf2julian(asftime2, &julian)\n") ;
>       status = tc_asf2julian(asftime2, &et) ;

The asf2et.c file in this directory has the calls with the function name with 
an '_' added.  This was needed because a Fortran routine, which 
adds the '_' in the Sun environment, was calling these routines.  
However, the proper way to do this is to put in a pragma statement 
into the Fortran routine for each of the calls to the C code, 
and leave the C code alone, and just link to it.  



create_metadata_IMS.c
et2ut1.for        Converts ET to UT1, Universal time; calls the vector lib.  
etrans.for        Coordinate transformation; calls the vector lib.  
gcbomb.for
gha.ini
gha_append.for
gha_stoic_maint.csh
gha_today.exe*
gha_today.for
gha_update.exe*
gha_update.for
mailrc.smp
make_gha_today
make_gha_update
make_stoicfile_metadata
mps2gha.for       Accepts ASF time and writes GHA.  
netrc.smp
setup.ksh
stoicfile_metadata.c
stoicfile_metadata.exe*

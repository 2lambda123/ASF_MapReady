#!/bin/csh
# # # Set the path explicitly.
#
set path = ( /usr/sbin /sbin /usr/bin /bin /usr/bsd )

#
# Find  all processes that were invoked by the CP and that are
# still alive in the subsystems :
#
#  Pearl Haw 07/31/97  818-354-3758

# construct file name based on date
set dd=`date`
set filename=`echo $dd | awk '{print $2 $3}'`   
echo "Please ignore the following warning message:"
echo "\n This list is generated by the SETI script." > /tmp/$filename
echo " SETI searches for leftover programs that are still " >> /tmp/$filename
echo " running/hanging after CP terminates.\n " >> /tmp/$filename
echo $dd >> /tmp/$filename

foreach HOSTNAME (cp pasadena alhambra agate simi newasp pps)

echo "\n on $HOSTNAME found:\n "  >> /tmp/$filename
rsh $HOSTNAME "env COLUMNS=120 /usr/bin/ps -f -u sps "  | egrep 'asfn|poe|exec_asp' | grep -v grep  >> /tmp/$filename
end


echo "\n DONE -- /tmp/$filename contains the search results"
exit 0
